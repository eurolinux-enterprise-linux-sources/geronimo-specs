<gbeans>

    <gbean class="org.apache.geronimo.deployment.xml.LocalEntityResolver" objectName="geronimo.system:type=EntityResolver">
        <default attribute="CatalogFileURI" type="java.net.URI">core/src/conf/resolver-catalog.xml</default>
        <default attribute="FailOnUnresolvable" type="boolean">false</default>
    </gbean>

    <gbean class="org.apache.geronimo.deployment.xml.ParserFactoryImpl" objectName="geronimo.system:type=ParserFactory">
        <endpoint name="EntityResolver">
            <pattern>geronimo.system:type=EntityResolver</pattern>
        </endpoint>
    </gbean>

    <gbean class="org.apache.geronimo.deployment.BatchDeployerFactory" objectName="geronimo.system:type=BatchDeployerFactory">
        <endpoint name="Deployers">
            <pattern>geronimo.deployment:*</pattern>
        </endpoint>
    </gbean>

    <!-- security -->
    <gbean class="org.apache.geronimo.security.SecurityService" objectName="geronimo.security:type=SecurityService">
        <default attribute="PolicyConfigurationFactory" type="java.lang.String">org.apache.geronimo.security.jacc.GeronimoPolicyConfigurationFactory</default>
        <endpoint name="Realms">
            <pattern>geronimo.security:type=SecurityRealm,*</pattern>
        </endpoint>
        <endpoint name="ModuleConfigurations">
            <pattern>geronimo.security:type=ModuleConfiguration,*</pattern>
        </endpoint>
    </gbean>

    <gbean class="org.apache.geronimo.security.realm.providers.PropertiesFileSecurityRealm" objectName="geronimo.security:type=SecurityRealm,name=Foo">
        <default attribute="RealmName" type="java.lang.String">Foo</default>
        <default attribute="UsersURI" type="java.net.URI">file:./core/src/test-data/data/users.properties</default>
        <default attribute="GroupsURI" type="java.net.URI">file:./core/src/test-data/data/groups.properties</default>
    </gbean>

    <gbean class="org.apache.geronimo.security.bridge.CallerIdentityUserPasswordRealmBridge" objectName="geronimo.security:service=RealmBridge,type=CallerIdentity">
        <default attribute="TargetRealm" type="java.lang.String">Foo</default>
    </gbean>

    <gbean class="org.apache.geronimo.security.bridge.ConfiguredIdentityUserPasswordRealmBridge" objectName="geronimo.security:service=RealmBridge,type=ConfiguredIdentity">
        <default attribute="TargetRealm" type="java.lang.String">Foo</default>
        <default attribute="ConfiguredUser" type="java.lang.String">user</default>
        <default attribute="ConfiguredPassword" type="java.lang.String">password</default>
    </gbean>

    <gbean class="org.apache.geronimo.security.bridge.PropertiesFilePrincipalMappingUserPasswordRealmBridge" objectName="geronimo.security:service=RealmBridge,type=MappedIdentity">
        <default attribute="TargetRealm" type="java.lang.String">Foo</default>
        <default attribute="PrincipalSourceType" type="java.lang.Class">org.apache.geronimo.security.realm.providers.PropertiesFileUserPrincipal</default>
        <default attribute="PrincipalTargetCallbackName" type="java.lang.String">user name</default>
        <default attribute="UserNameSourceType" type="java.lang.Class">org.apache.geronimo.security.realm.providers.PropertiesFileUserPrincipal</default>
        <default attribute="UserNameTargetCallbackName" type="java.lang.String">user name</default>
        <default attribute="PasswordSourceType" type="java.lang.Class">org.apache.geronimo.security.realm.providers.PropertiesFileUserPrincipal</default>
        <default attribute="PropertyFileURL" type="java.net.URL">file:./core/src/test-data/data/mapping.properties</default>
    </gbean>

    <!-- transaction -->
    <gbean class="org.apache.geronimo.transaction.TransactionManagerProxy" objectName="geronimo.transaction:service=TransactionManager"/>

    <!-- connector -->
    <gbean class="org.apache.geronimo.connector.work.GeronimoWorkManager" objectName="geronimo.connector:service=WorkManager">
        <default attribute="SyncMinimumPoolSize" type="int">0</default>
        <default attribute="SyncMaximumPoolSize" type="int">10</default>
        <default attribute="StartMinimumPoolSize" type="int">0</default>
        <default attribute="StartMaximumPoolSize" type="int">10</default>
        <default attribute="ScheduledMinimumPoolSize" type="int">0</default>
        <default attribute="ScheduledMaximumPoolSize" type="int">10</default>
    </gbean>

    <gbean class="org.apache.geronimo.connector.BootstrapContext" objectName="geronimo.connector:role=BootstrapContext">
        <endpoint name="WorkManager">
            <pattern>geronimo.connector:service=WorkManager</pattern>
        </endpoint>
        <endpoint name="XATerminator">
            <pattern>geronimo.transaction:service=TransactionManager</pattern>
        </endpoint>
    </gbean>

    <gbean class="org.apache.geronimo.connector.outbound.connectiontracking.ConnectionTrackingCoordinator" objectName="geronimo.connector:service=ConnectionTrackingCoordinator"/>

    <gbean class="org.apache.geronimo.connector.outbound.ConnectionManagerDeployment" objectName="geronimo.server:j2eeType=ConnectionManager,name=test">
        <default attribute="UseConnectionRequestInfo" type="boolean">false</default>
        <default attribute="UseSubject" type="boolean">false</default>
        <default attribute="UseTransactionCaching" type="boolean">true</default>
        <default attribute="UseLocalTransactions" type="boolean">true</default>
        <default attribute="UseTransactions" type="boolean">true</default>
        <default attribute="MaxSize" type="int">10</default>
        <default attribute="BlockingTimeout" type="int">1000</default>
        <default attribute="Name" type="java.lang.String">test</default>
        <endpoint name="RealmBridge">
            <pattern>geronimo.security:service=RealmBridge,type=CallerIdentity</pattern>
        </endpoint>
        <endpoint name="ConnectionTracker">
            <pattern>geronimo.connector:service=ConnectionTrackingCoordinator</pattern>
        </endpoint>
    </gbean>

    <gbean class="org.apache.geronimo.connector.deployment.ConnectorDeployer" objectName="geronimo.deployment:type=connector">
        <default attribute="ConnectionTrackerNamePattern" type="javax.management.ObjectName">geronimo.connector:service=ConnectionTrackingCoordinator</default>
        <endpoint name="ParserFactory">
            <pattern>geronimo.system:type=ParserFactory</pattern>
        </endpoint>
    </gbean>

    <!-- uncomment and set the packageURL to deploy the openjca adapter -->
    <!--gbean class="org.apache.geronimo.deployment.util.ExplicitDeployment" objectName="geronimo.app:name=OpenJCAAdapter">
        <default attribute="ConfigID" type="java.net.URI">org/apache/geronimo/OpenJCA</default>
        <default attribute="PackageURL" type="java.net.URL">file:/Users/david/.maven/repository/openejb-jca/jars/openejb-jca-DEV.jar</default>
        <endpoint name="ConfigurationParent">
            <pattern>geronimo.config:name="org/apache/geronimo/Bootstrap"</pattern>
        </endpoint>
        <endpoint name="BatchDeployerFactory">
            <pattern>geronimo.system:type=BatchDeployerFactory</pattern>
        </endpoint>
        <endpoint name="Kernel">
            <pattern>geronimo.boot:role=Kernel</pattern>
        </endpoint>
    </gbean-->

    <!-- web -->

    <gbean class="org.apache.geronimo.jetty.JettyContainerImpl" objectName="geronimo.web:type=WebContainer,container=Jetty">
    </gbean>

    <gbean class="org.apache.geronimo.jetty.connector.HTTPConnector" objectName="geronimo.web:type=WebConnector,container=Jetty,port=8080">
        <default attribute="Port" type="int">8080</default>
        <endpoint name="JettyContainer">
            <pattern>geronimo.web:type=WebContainer,container=Jetty</pattern>
        </endpoint>
        <!--        <default attribute="MaxConnections" type="int">10</default>-->
        <!--        <default attribute="MaxIdleTime" type="int">10</default>-->
        <!--default attribute="Contexts" type="java.lang.String[]"></default-->
    </gbean>

    <!--
        <gbean class="org.apache.geronimo.web.deployment.WebDeployer" objectName="geronimo.deployment:type=Web">
            <default attribute="Type" type="java.lang.String">Jetty</default>
            <default attribute="WebApplicationClass" type="java.lang.String">org.apache.geronimo.web.jetty.JettyWebApplication</default>
            <default attribute="Java2ClassLoadingCompliance" type="boolean">false</default>
            <default attribute="TransactionManagerNamePattern" type="javax.management.ObjectName">geronimo.transaction:service=TransactionManager</default>
            <default attribute="TrackedConnectionAssociatorNamePattern" type="javax.management.ObjectName">geronimo.connector:service=ConnectionTrackingCoordinator</default>
            <endpoint name="ParserFactory">
                <pattern>geronimo.system:type=ParserFactory</pattern>
            </endpoint>
        </gbean>
    -->


    <!--
        <gbean class="org.apache.geronimo.deployment.util.ExplicitDeployment" objectName="geronimo.app:name=WebConsole">
            <default attribute="ConfigID" type="java.net.URI">org/apache/geronimo/WebConsole</default>
            <default attribute="PackageURL" type="java.net.URL">console-web/target/geronimo-web-console.war</default>
            <endpoint name="ConfigurationParent">
                <pattern>geronimo.config:name="org/apache/geronimo/Bootstrap"</pattern>
            </endpoint>
            <endpoint name="BatchDeployerFactory">
                <pattern>geronimo.system:type=BatchDeployerFactory</pattern>
            </endpoint>
            <endpoint name="Kernel">
                <pattern>geronimo.boot:role=Kernel</pattern>
            </endpoint>
        </gbean>
    -->

</gbeans>
